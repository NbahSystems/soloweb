<div style="max-width: 800px; margin: 0 auto; font-family: Arial, sans-serif; padding: 20px;">
  <h1 id="titleEl" style="color: #4a4a4a; text-align: center; font-size: 3em; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.1);"></h1>
  
  <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
    <img id="dessertImg" src="https://placehold.co/400x300" alt="Dessert Image" style="width: 48%; max-width: 400px; height: auto; border-radius: 10px;">
    <img id="ingredientsImg" src="https://placehold.co/400x300" alt="Ingredients Image" style="width: 48%; max-width: 400px; height: auto; border-radius: 10px;">
  </div>
  
  <div id="ingredientSection">
    <h2 style="color: #6a5acd;"></h2>
    <ul id="ingredientsList" style="color: #4a4a4a;"></ul>
  </div>
  
  <div id="stepDetailCtn" style="margin-top: 20px; padding: 15px; background-color: #f0f0f0; border-radius: 5px; display: none;"></div>

  <button id="generateBtn" onclick="generateNewDessert()" style="background-color: #6a5acd; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 20px; display: block; width: 100%;"></button>
</div>

<script>
  let currentStep = 0;
  let steps = [];

  async function generateNewDessert() {
    generateBtn.disabled = true;
    generateBtn.textContent = "⏳ Generando...";

    let dessertRecipe = await generateText("Generate a pastry recipe in Spanish. Include a creative name and ingredients list.");
    let recipeLines = dessertRecipe.split('\n');

    titleEl.textContent = recipeLines[0];
    titleEl.style.animation = "fadeIn 1s";

    let ingredients = recipeLines.slice(recipeLines.indexOf("Ingredientes:") + 1);
    ingredientsList.innerHTML = ingredients.map(ing => `<li>${ing}</li>`).join('');

    let dessertImagePromise = generateImage(`A delicious ${recipeLines[0]} dessert, styled food photography`);
    let ingredientsImagePromise = generateImage(`Main ingredients for ${recipeLines[0]}: ${ingredients.slice(0, 3).join(', ')}`);
    
    dessertImagePromise.then(dataUrl => dessertImg.src = dataUrl);
    ingredientsImagePromise.then(dataUrl => ingredientsImg.src = dataUrl);

    generateBtn.disabled = false;
    generateBtn.textContent = "Generar Nuevo Postre";
    
    currentStep = 0;
    stepDetailCtn.style.display = "none";
  }

  generateNewDessert();
</script>

<style>
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>
